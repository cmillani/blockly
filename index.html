<!DOCTYPE html>

<html>
<head>
  <title>HelloBLE</title>
  <script>
  if (window.location.protocol != "https:" && window.location.protocol != "file:")
      window.location.href = "https:" + window.location.href.substring(window.location.protocol.length);
  </script>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <p>
    This is a debugging interface. Soon, a client side web SDK for COISA will be available here :)
  </p>
  <p>
    Open <b><i>chrome://flags/#enable-web-bluetooth</i></b> to enable web bluetooth <br>
    Only fully works on Android M+ with chrome 49, ChromeOS and Linux with Chrome 50
  </p>
  <script>
    function hello(){
      console.log("Seek");
      navigator.bluetooth.requestDevice({ filters: [{ services: ['00002020-0000-1000-8000-00805f9b34fb'] }] })
      .then(device => {
        console.log(device);
        return device.connectGATT();
      })
      .then(server => {
        console.log(server);
        return server.getPrimaryService('00002020-0000-1000-8000-00805f9b34fb')
      })
      .then(service => {
        console.log(service);
      })
      .catch(error => { console.log(error); });
    }
  </script>
  <div id="greeting"></div>
  <script src="main.js"></script> 
  <input type="button" value="Click here to search COISA" onclick="hello()">
</body>
</html>
